---
type: tip
publishAt: "2021-10-18"
cover: 1550751827-4bd374c3f58b
---

# `elm-ts-interop` init Command, Codec and Pipeline APIs, and docs site

This week I have some improvements to announce for `elm-ts-interop`. In particular, I've been focused on making it easier to get started with the free Community Edition. And I've also shipped some new APIs for building up your type-safe Encoders and Decoders.

If you're not familiar with `elm-ts-interop`, it's a tool that generates TypeScript types from your custom JSON Decoders and Encoders to ensure that the types are in sync between your Elm app and TypeScript code. If you're not using TypeScript in your project, you can even benefit from the improved type-safety using vanilla JavaScript by using JSDoc comments ([[typescript-without-transpilation]]).

You can learn more about [How elm-ts-interop works](https://elm-ts-interop.com/how-it-works) and find some [learning resources](https://elm-ts-interop.com/resources).

## Starter Repo with ViteJS and TypeScript

There is now a starter setup for the `elm-ts-interop` Community Edition. Check it out, it uses a simple ViteJS config to load in Elm and TypeScript code, and it also has an `eslint` rule to enforce exhaustive switch statements so you can add a new `FromElm` port (Cmd port) and get a type error reminding you to handle that new data in your TypeScript code (just like adding a `Msg` and handling it in your `update` function).

The starter repo is at [github.com/dillonkearns/elm-ts-interop-starter](https://github.com/dillonkearns/elm-ts-interop-starter). And if you're a pro user, you can see the example Pro setup [on the `pro` branch](https://github.com/dillonkearns/elm-ts-interop-starter/tree/pro).

## elm-ts-interop Community Edition Setup Guide

You can find the newly published docs which inclue a [thorough walkthrough for how to get started with `elm-ts-interop`](https://elm-ts-interop.com/setup). To make it easier to get set up, I've also added an `elm-ts-interop init` command that will scaffold the two Elm files you need to get started. Try it out and let me know how it goes!

## elm-ts-interop Watch Mode

You can run `elm-ts-interop` with a `--watch` flag to have it re-run any time your Elm code changes. That helps speed up the feedback loop and get compiler errors as you change your InteropDefinitions module.

## Codec and Pipeline APIs

The [`elm-ts-json`](https://package.elm-lang.org/packages/dillonkearns/elm-ts-json/latest/) Elm package is the secret sauce for getting type information from your Decoders and Encoders. The core API remains the same, but version 2.0 of the package now comes with a `Codec` API (thank you miniBill for the great API design!) as well as a port of the [`NoRedInk/elm-json-decode-pipeline`](https://package.elm-lang.org/packages/NoRedInk/elm-json-decode-pipeline/latest/) API. The Codec API also includes a new addition from miniBill's Codec API for customizing the names of fields (rather than having custom types encoded as an Array of positional values). Check out the new [`TsJson.Codec` API](https://package.elm-lang.org/packages/dillonkearns/elm-ts-json/latest/TsJson-Codec) and [`TsJson.Pipeline` API](https://package.elm-lang.org/packages/dillonkearns/elm-ts-json/latest/TsJson-Decode-Pipeline).

## Simplified Discriminated Union Decoder

If your using the convention of having a string field that is used to determine the type of decoding to use (Discriminated Unions), there's now a helper that makes it a lot easier to do that with `elm-ts-json`.

```elm
import TsJson.Decode as TsDecode

type User
    = Admin { id : Int }
    | Guest

TsDecode.discriminatedUnion "role"
    [ ( "admin"
        , TsDecode.succeed (\id -> Admin { id = id })
        |> TsDecode.andMap (TsDecode.field "id" TsDecode.int)
        )
    , ( "guest", TsDecode.succeed Guest )
    ]
    |> TsDecode.runExample """{"role": "admin", "id": 123}"""
--> { decoded = Ok (Admin { id = 123 })
--> , tsType = """{ id : number; role : "admin" } | { role : "guest" }"""
--> }
```

As always, feel free to ask me questions on Twitter [@dillontkearns](https://twitter.com/dillontkearns), or on Slack (we have an [#elm-ts-interop channel](https://elmlang.slack.com/archives/C01ST485YAU)). Happy type-safe coding!

[//begin]: # "Autogenerated link references for markdown compatibility"
[typescript-without-transpilation]: typescript-without-transpilation "TypeScript Without Transpilation"
[//end]: # "Autogenerated link references"
